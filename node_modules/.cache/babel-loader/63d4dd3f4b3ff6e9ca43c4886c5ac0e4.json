{"ast":null,"code":"import _slicedToArray from \"/Users/sonutoor/codingsmaan/React-WeatherApp/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/sonutoor/codingsmaan/React-WeatherApp/src/components/WeatherForm.js\";\nimport Button from './Button';\nimport CityInput from './CityInput';\nimport React, { useContext, useState } from 'react';\nimport styled from \"styled-components\";\nimport { WeatherContext } from \"../context/WeatherContext\";\nconst API_KEY = process.env.REACT_APP_WEATHERAPIKEY;\nlet StyledForm = styled.form`\n  display: flex;\n  width: 50%;\n  margin-left: 25%;\n  @media (max-width: 575px) {\n    flex-direction: column;\n  }\n`; // skipping the 0:00 time of each day\n\nconst createWeatherArrays = weather => {\n  let weatherArrays = [[]];\n  let day = 0;\n  let firstDay = +weather[0][\"dt_txt\"].slice(8, 10);\n\n  for (let i = 0; i < weather.length; i++) {\n    let currentDay = +weather[i][\"dt_txt\"].slice(8, 10);\n\n    if (currentDay === firstDay) {\n      weatherArrays[day].push(weather[i]);\n    } else {\n      // now the day isn't the same, which means I need to jump to the new array\n      day += 1; // push weather at i into the new array before continuing\n\n      weatherArrays.push([]);\n      weatherArrays[day].push(weather[i]);\n      firstDay = currentDay;\n    }\n  }\n\n  return weatherArrays;\n};\n\nconst WeatherForm = () => {\n  const _useState = useState(\"\"),\n        _useState2 = _slicedToArray(_useState, 2),\n        city = _useState2[0],\n        setCity = _useState2[1];\n\n  const _useContext = useContext(WeatherContext),\n        _useContext2 = _slicedToArray(_useContext, 2),\n        weather = _useContext2[0],\n        setWeather = _useContext2[1];\n\n  let units = `metric`;\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    const API_URL = `https://api.openweathermap.org/data/2.5/forecast?q=${city}&APPID=${API_KEY}&units=${units}`;\n    fetch(API_URL).then(res => res.json()).then(function (data) {\n      let arrays = createWeatherArrays(data.list);\n      let weatherData = {\n        city: data.city.name,\n        weather: arrays\n      }; // loop over the data.list\n      // each time the dt.txt changes create a a new array\n\n      setWeather(data);\n      console.log(data);\n      console.log(arrays);\n    });\n    setCity(\"\");\n  };\n\n  return React.createElement(StyledForm, {\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(CityInput, {\n    city: city,\n    setCity: setCity,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }), React.createElement(Button, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }));\n};\n\nexport default WeatherForm;","map":{"version":3,"sources":["/Users/sonutoor/codingsmaan/React-WeatherApp/src/components/WeatherForm.js"],"names":["Button","CityInput","React","useContext","useState","styled","WeatherContext","API_KEY","process","env","REACT_APP_WEATHERAPIKEY","StyledForm","form","createWeatherArrays","weather","weatherArrays","day","firstDay","slice","i","length","currentDay","push","WeatherForm","city","setCity","setWeather","units","handleSubmit","event","preventDefault","API_URL","fetch","then","res","json","data","arrays","list","weatherData","name","console","log"],"mappings":"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","sourcesContent":["import Button from './Button'\nimport CityInput from './CityInput'\nimport React, { useContext, useState } from 'react';\nimport styled from \"styled-components\";\nimport { WeatherContext } from \"../context/WeatherContext\";\n\n\nconst API_KEY = process.env.REACT_APP_WEATHERAPIKEY;\n\nlet StyledForm = styled.form`\n  display: flex;\n  width: 50%;\n  margin-left: 25%;\n  @media (max-width: 575px) {\n    flex-direction: column;\n  }\n`\n\n// skipping the 0:00 time of each day\nconst createWeatherArrays = (weather) => {\n  let weatherArrays = [[]]\n  let day = 0;\n  let firstDay = +(weather[0][\"dt_txt\"].slice(8,10))\n\n  for (let i = 0; i < weather.length; i++) {\n    let currentDay = +(weather[i][\"dt_txt\"].slice(8,10))\n    if (currentDay === firstDay) {\n      weatherArrays[day].push(weather[i])\n    }\n    else {\n      // now the day isn't the same, which means I need to jump to the new array\n      day += 1\n      // push weather at i into the new array before continuing\n      weatherArrays.push([])\n      weatherArrays[day].push(weather[i])\n      firstDay = currentDay\n    }\n  }\n  return weatherArrays\n}\n\nconst WeatherForm = () => {\n  const [city, setCity] = useState(\"\")\n  const [weather, setWeather] = useContext(WeatherContext);\n  let units = `metric`;\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n\n    const API_URL = `https://api.openweathermap.org/data/2.5/forecast?q=${city}&APPID=${API_KEY}&units=${units}`;\n    \n    fetch(API_URL)\n      .then(res => res.json())\n      .then(function(data) {\n        let arrays = createWeatherArrays(data.list)\n         let weatherData = {\n           city: data.city.name,\n           weather: arrays\n         }\n\n         // loop over the data.list\n         // each time the dt.txt changes create a a new array\n        setWeather(data)\n        console.log(data)\n        console.log(arrays)        \n      })\n    setCity(\"\")\n  }\n\n  return (\n    <StyledForm onSubmit={handleSubmit}>\n      <CityInput \n        city={city}\n        setCity={setCity}/>\n      <Button/>\n    </StyledForm>\n  )\n}\n\nexport default WeatherForm;"]},"metadata":{},"sourceType":"module"}